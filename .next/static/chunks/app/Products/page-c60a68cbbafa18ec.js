(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9445:(e,s,a)=>{Promise.resolve().then(a.bind(a,7022))},5565:(e,s,a)=>{"use strict";a.d(s,{default:()=>l.a});var t=a(4146),l=a.n(t)},4146:(e,s,a)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var a in s)Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}(s,{default:function(){return n},getImageProps:function(){return c}});let t=a(306),l=a(666),r=a(7970),i=t._(a(5514));function c(e){let{props:s}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(s))void 0===a&&delete s[e];return{props:s}}let n=r.Image},7022:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(5155),l=a(2115),r=a(5565);function i(){let[e,s]=(0,l.useState)({category:"TSHIRTS",name:"",description:"",inStock:0,price:0,color:"",material:"",images:[],imageFiles:[]}),a=e=>{let{name:a,value:t,type:l}=e.target;s(e=>({...e,[a]:"number"===l?parseFloat(t):t}))},i=async a=>{let t=a.target.files;if(t){let a=4-e.images.length;if(a<=0){alert("Maximum 4 images allowed");return}let l=Array.from(t).slice(0,a),r=l.map(e=>URL.createObjectURL(e));s(e=>({...e,images:[...e.images,...r],imageFiles:[...e.imageFiles,...l]}))}},c=e=>{s(s=>({...s,images:s.images.filter((s,a)=>a!==e),imageFiles:s.imageFiles.filter((s,a)=>a!==e)}))},n=async a=>{a.preventDefault();let t=new FormData;Object.entries(e).forEach(e=>{let[s,a]=e;"images"!==s&&"imageFiles"!==s&&t.append(s,String(a))}),e.imageFiles.forEach((e,s)=>{t.append("image".concat(s),e)});try{let e=await fetch("/api/products",{method:"POST",body:t}),a=await e.json();e.ok?(alert("Product added successfully!"),s({category:"TSHIRTS",name:"",description:"",inStock:0,price:0,color:"",material:"",images:[],imageFiles:[]})):alert("Failed to add product: ".concat(JSON.stringify(a,null,2)))}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,t.jsxs)("form",{onSubmit:n,className:"max-w-3xl mx-auto bg-white p-6 rounded shadow-md mt-10",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Add Product"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Category"}),(0,t.jsxs)("select",{name:"category",value:e.category,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring",children:[(0,t.jsx)("option",{value:"TSHIRTS",children:"TSHIRTS"}),(0,t.jsx)("option",{value:"HOODIES",children:"HOODIES"}),(0,t.jsx)("option",{value:"CAPS",children:"CAPS"}),(0,t.jsx)("option",{value:"WATER",children:"WATER"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{name:"description",value:e.description,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Price"}),(0,t.jsx)("input",{type:"number",name:"price",value:e.price,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"In Stock"}),(0,t.jsx)("input",{type:"number",name:"inStock",value:e.inStock,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]})]}),(()=>{switch(e.category){case"TSHIRTS":case"HOODIES":return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Color"}),(0,t.jsx)("input",{type:"text",name:"color",value:e.color,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700",children:"Material"}),(0,t.jsx)("input",{type:"text",name:"material",value:e.material,onChange:a,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"})]})]});default:return null}})(),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-gray-700",children:["Upload Images (",e.images.length,"/4)"]}),(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:i,className:"w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring"}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:e.images.map((e,s)=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.default,{src:e,height:160,width:160,alt:"Product image ".concat(s+1),className:"w-full h-32 object-cover rounded"}),(0,t.jsx)("button",{type:"button",onClick:()=>c(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600",children:"\xd7"})]},s))})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded shadow hover:bg-blue-600 focus:outline-none",children:"Add Product"})]})}function c(){let[e,s]=(0,l.useState)([]),[a,c]=(0,l.useState)([]),[n,o]=(0,l.useState)("ALL"),[d,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!0),h=async()=>{try{let e=await fetch("/api/products");if(!e.ok)throw Error("Failed to fetch products");let a=await e.json();s(a),c(a),x(!1)}catch(e){console.error("Error fetching products:",e),x(!1)}};(0,l.useEffect)(()=>{h()},[]);let p=s=>{o(s),"ALL"===s?c(e):c(e.filter(e=>e.category===s))};return(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"relative w-full max-w-4xl",children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"absolute right-4 top-4 text-white z-50",children:"âœ•"}),(0,t.jsx)(i,{})]})}),(0,t.jsxs)("div",{className:"relative z-10 rounded-[10px] bg-white shadow-1 mb-4 px-4 py-4 md:px-6 2xl:px-7 flex flex-wrap items-center justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-start gap-2",children:["ALL","TSHIRTS","HOODIES","CAPS","WATER"].map(e=>(0,t.jsx)("button",{onClick:()=>p(e),className:"py-3 px-7 rounded-sm ".concat(n===e?"bg-[#14AE5C] text-white":"bg-[#f1f1f1] hover:bg-[#14AE5C] hover:text-[#FFFFFF]"),children:e},e))}),(0,t.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,t.jsx)("button",{onClick:()=>m(!0),className:"border-[2px] rounded-sm py-3 px-7 hover:bg-[#14AE5C] hover:text-[#FFFFFF] hover:border-[#14AE5C]",children:"+ ADD NEW"})})]}),(0,t.jsxs)("div",{className:"relative z-10 rounded-[10px] bg-white shadow-1",children:[(0,t.jsxs)("div",{className:"grid grid-cols-6 border-t border-stroke px-4 py-4 sm:grid-cols-8 md:px-6 2xl:px-7",children:[(0,t.jsx)("div",{className:"col-span-3 flex items-center",children:(0,t.jsx)("p",{className:"font-medium",children:"Product Name"})}),(0,t.jsx)("div",{className:"col-span-2 hidden items-center sm:flex",children:(0,t.jsx)("p",{className:"font-medium",children:"Category"})}),(0,t.jsx)("div",{className:"col-span-1 flex items-center",children:(0,t.jsx)("p",{className:"font-medium",children:"Price"})}),(0,t.jsx)("div",{className:"col-span-2 flex items-center",children:(0,t.jsx)("p",{className:"font-medium",children:"Stock"})})]}),u?(0,t.jsx)("div",{className:"text-center py-8",children:"Loading products..."}):0===a.length?(0,t.jsx)("div",{className:"text-center py-8",children:"No products found"}):a.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-6 border-t border-stroke px-4 py-4 sm:grid-cols-8 md:px-6 2xl:px-7",children:[(0,t.jsx)("div",{className:"col-span-3 flex items-center",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[(0,t.jsx)("div",{className:"h-12.5 w-15 rounded-md",children:(0,t.jsx)(r.default,{src:e.imageURL1||"/products/product_placeholder.png",width:60,height:50,alt:e.name,className:"rounded-md"})}),(0,t.jsx)("p",{className:"text-body-sm font-medium text-dark",children:e.name})]})}),(0,t.jsx)("div",{className:"col-span-2 hidden items-center sm:flex",children:(0,t.jsx)("p",{className:"text-body-sm font-medium text-dark",children:e.category})}),(0,t.jsx)("div",{className:"col-span-1 flex items-center",children:(0,t.jsxs)("p",{className:"text-body-sm font-medium text-dark",children:["Ksh",e.price]})}),(0,t.jsx)("div",{className:"col-span-2 flex items-center",children:(0,t.jsx)("p",{className:"text-body-sm font-medium text-dark",children:e.inStock})})]},e.id))]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[970,441,517,358],()=>s(9445)),_N_E=e.O()}]);