(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{9495:(e,s,t)=>{Promise.resolve().then(t.bind(t,9071))},5565:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(4146),a=t.n(r)},4146:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{default:function(){return i},getImageProps:function(){return d}});let r=t(306),a=t(666),l=t(7970),n=r._(t(5514));function d(e){let{props:s}=(0,a.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(s))void 0===t&&delete s[e];return{props:s}}let i=l.Image},9071:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var r=t(5155),a=t(2115),l=t(5565),n=t(8173),d=t.n(n),i=t(1094);let c=e=>{let{id:s}=e,[t,n]=(0,a.useState)(null),c=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/orders/".concat(s)),t=await e.json();n(t)}catch(e){console.error("Error fetching order details:",e)}},[s]);(0,a.useEffect)(()=>{s&&c()},[s,c]);let o=async e=>{try{(await fetch("/api/orders/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok&&c()}catch(e){console.error("Error updating order status:",e)}};return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative z-10 rounded-[10px] bg-white shadow-1 mb-4 px-4 py-4 md:px-6 2xl:px-7 flex items-center justify-start flex-wrap",children:(0,r.jsxs)("ol",{className:"flex items-center whitespace-nowrap",children:[(0,r.jsx)("li",{className:"inline-flex items-center",children:(0,r.jsxs)(d(),{className:"flex items-center text-sm text-gray-500 hover:text-blue-600 focus:outline-none focus:text-blue-600",href:"/Orders",children:["Orders",(0,r.jsx)("svg",{className:"shrink-0 mx-2 size-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m9 18 6-6-6-6"})})]})}),(0,r.jsx)("li",{className:"inline-flex items-center text-sm font-semibold text-gray-800 truncate",children:"Order Details"})]})}),(0,r.jsxs)("div",{className:"w-full p-6 rounded-2xl bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"p-0",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Order Details"}),(0,r.jsxs)("p",{className:"mb-2",children:["Order #",t.orderNumber]}),(0,r.jsxs)("p",{className:"mb-6",children:["Status: ",t.orderProgress]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-base font-bold mr-4",children:"Change Order Status: "}),(0,r.jsx)("select",{value:t.orderProgress,onChange:e=>o(e.target.value),className:"py-3 px-7 rounded-sm bg-[#14AE5C] text-[#FFFFFF]",children:Object.values(i.OrderProgress).map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"font-semibold mb-4",children:"Order Info"}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Order Date:"})," ",new Date(t.createdAt).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Last Updated:"})," ",new Date(t.updatedAt).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Status:"})," ",t.orderProgress]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Payment Status:"})," ",t.paymentStatus]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Payment Method:"})," ",t.paymentMethod]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"font-semibold mb-4",children:"Customer"}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Name:"})," ","".concat(t.address.firstName," ").concat(t.address.lastName)]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Email:"})," ",t.address.email]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Phone:"})," ",t.address.phone]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"font-semibold mb-2",children:"Shipping Address"}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"City:"})," ",t.address.city]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Street:"})," ",t.address.street]}),(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"House:"})," ",t.address.house]}),t.address.additionalInfo&&(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("strong",{children:"Additional Info:"})," ",t.address.additionalInfo]})]})]}),(0,r.jsx)("div",{className:"space-y-4 mb-6",children:t.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[(0,r.jsx)(l.default,{src:e.product.imageURL1||"/product/product-02.webp",alt:e.product.name,width:80,height:80}),(0,r.jsxs)("div",{className:"flex-1 ml-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.product.name}),(0,r.jsxs)("p",{children:["Quantity: ",e.quantity]})]}),(0,r.jsxs)("p",{className:"font-semibold",children:["Ksh",e.price.toLocaleString()]})]},e.id))}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("strong",{children:"Subtotal:"})," Ksh",t.subtotal.toLocaleString()]}),(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("strong",{children:"Shipping Charge:"})," Ksh",t.shippingCost.toLocaleString()]}),(0,r.jsxs)("p",{className:"mb-1",children:[(0,r.jsx)("strong",{children:"Taxes:"})," Ksh",(t.totalAmount-t.subtotal-t.shippingCost).toLocaleString()]}),(0,r.jsxs)("h3",{className:"text-xl font-bold mt-4",children:["Total: Ksh",t.totalAmount.toLocaleString()]})]})]})]}):(0,r.jsx)("div",{children:"Loading..."})}}},e=>{var s=s=>e(e.s=s);e.O(0,[970,173,372,441,517,358],()=>s(9495)),_N_E=e.O()}]);